---
description: Node.js and Express.js best practices for backend development
globs: **/*.js, **/*.ts, src/**/*.ts
---

# Vue.js æ ¸å¿ƒå¼€å‘è§„èŒƒ

## ğŸ¯ æ ¸å¿ƒæŠ€æœ¯æ ˆ
- Vue 3.0 + Composition API + TypeScript
- Pinia (çŠ¶æ€ç®¡ç†) + Vue Router (è·¯ç”±)
- ArcoDesign (UIç»„ä»¶) + TailwindCSS (æ ·å¼)
- Vite (æ„å»ºå·¥å…·) + Yarn (åŒ…ç®¡ç†)

## ğŸŒ ç¯å¢ƒé…ç½®è¦æ±‚
### åŒç¯å¢ƒæ”¯æŒåŸåˆ™
- **è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹**ï¼šå¼€å‘/ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨è¯†åˆ«å’Œåˆ‡æ¢
- **CORSè·¨åŸŸæ”¯æŒ**ï¼šå®Œæ•´çš„è·¨åŸŸé…ç½®å’ŒåŸŸåç™½åå•
- **é…ç½®ç»Ÿä¸€ç®¡ç†**ï¼šç¯å¢ƒå˜é‡é›†ä¸­ç®¡ç†å’ŒéªŒè¯
- **å®‰å…¨æœºåˆ¶**ï¼šç”Ÿäº§ç¯å¢ƒå®‰å…¨ç­–ç•¥è‡ªåŠ¨å¯ç”¨

### æ ¸å¿ƒç¯å¢ƒé…ç½®
```typescript
// config/env.ts - ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹
export const getCurrentEnvironment = () => {
  if (import.meta.env.NODE_ENV === 'production') return 'production'
  if (import.meta.env.PROD) return 'production'
  const hostname = window.location?.hostname
  if (hostname && !['localhost', '127.0.0.1'].includes(hostname)) {
    return 'production'
  }
  return 'development'
}

// ç¯å¢ƒé…ç½®å¯¹è±¡
export const appConfig = {
  env: getCurrentEnvironment(),
  api: {
    baseURL: import.meta.env.VITE_API_BASE_URL || 
      (getCurrentEnvironment() === 'production' 
        ? 'https://api.yourdomain.com' 
        : 'http://localhost:3000/api'),
    timeout: getCurrentEnvironment() === 'production' ? 15000 : 10000
  },
  cors: {
    allowedOrigins: (import.meta.env.VITE_ALLOWED_ORIGINS || '').split(',')
  }
}
```

### ç¯å¢ƒå˜é‡æ–‡ä»¶
```bash
# .env.development
VITE_APP_ENV=development
VITE_API_BASE_URL=http://localhost:3000/api
VITE_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# .env.production  
VITE_APP_ENV=production
VITE_API_BASE_URL=https://api.yourdomain.com
VITE_ALLOWED_ORIGINS=https://yourdomain.com
```

## ğŸ“ é¡¹ç›®ç»“æ„ï¼ˆç®€åŒ–ï¼‰
```
src/
â”œâ”€â”€ components/          # ç»„ä»¶ (PascalCaseå‘½å)
â”‚   â”œâ”€â”€ base/           # åŸºç¡€ç»„ä»¶
â”‚   â””â”€â”€ business/       # ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ composables/        # ç»„åˆå¼API (useXxxå‘½å)
â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶ (env.ts, api.ts)
â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”œâ”€â”€ stores/            # PiniaçŠ¶æ€ç®¡ç†
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â””â”€â”€ types/             # TypeScriptç±»å‹
```

## ğŸ”§ æ ¸å¿ƒç¼–ç è§„èŒƒ
### ç»„ä»¶è®¾è®¡
```vue
<script setup lang="ts">
/**
 * ç»„ä»¶åŠŸèƒ½æè¿°
 * @description è¯¦ç»†è¯´æ˜ç»„ä»¶ç”¨é€”
 */

// Propsç±»å‹å®šä¹‰
interface Props {
  userId: number
  showActions?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  showActions: true
})

// ç»„åˆå¼APIä½¿ç”¨
const { data, loading, error } = useFetch(`/api/users/${props.userId}`)
const { isDevelopment } = useEnvironment()

// æ–¹æ³•å®šä¹‰ï¼ˆåŠ¨è¯+åè¯ï¼‰
const handleEdit = () => {
  // å®ç°é€»è¾‘
}
</script>

<template>
  <div class="user-card">
    <!-- ç®€æ´çš„æ¨¡æ¿ç»“æ„ -->
    <div v-if="loading">åŠ è½½ä¸­...</div>
    <div v-else-if="error">é”™è¯¯: {{ error }}</div>
    <div v-else>
      <h3>{{ data?.name }}</h3>
      <button v-if="showActions" @click="handleEdit">ç¼–è¾‘</button>
    </div>
  </div>
</template>

<style scoped>
.user-card {
  @apply p-4 bg-white rounded-lg shadow-sm;
}
</style>
```

### å‘½åè§„èŒƒ
- **ç»„ä»¶æ–‡ä»¶**ï¼šPascalCase (`UserProfile.vue`)
- **å˜é‡/æ–¹æ³•**ï¼šcamelCase + åŠ¨è¯å‰ç¼€ (`handleSubmit`, `fetchData`)
- **å¸¸é‡**ï¼šUPPER_SNAKE_CASE (`MAX_RETRY_COUNT`)
- **CSSç±»å**ï¼škebab-case (`user-card`, `btn-primary`)

### Composablesæ¨¡å¼
```typescript
// composables/useEnvironment.ts
export function useEnvironment() {
  const currentEnv = computed(() => appConfig.env)
  const isDevelopment = computed(() => appConfig.env === 'development')
  const isProduction = computed(() => appConfig.env === 'production')
  
  const envLog = (message: string) => {
    if (isDevelopment.value) {
      console.log(`[${appConfig.env}] ${message}`)
    }
  }
  
  return { currentEnv, isDevelopment, isProduction, envLog }
}
```

## ğŸ¨ æ ·å¼è§„èŒƒ
```vue
<style scoped>
/* 1. ä½¿ç”¨TailwindCSSç±»åä¼˜å…ˆ */
.component {
  @apply flex items-center p-4;
}

/* 2. è‡ªå®šä¹‰æ ·å¼ä½¿ç”¨CSSå˜é‡ */
.custom-style {
  color: var(--color-primary);
  padding: var(--spacing-md);
}

/* 3. å“åº”å¼è®¾è®¡ - ç§»åŠ¨ä¼˜å…ˆ */
.grid {
  @apply grid grid-cols-1 gap-4;
}

@media (min-width: 768px) {
  .grid {
    @apply grid-cols-2;
  }
}
</style>
```

## ğŸš€ æ€§èƒ½è¦æ±‚
- **ç»„ä»¶æ‡’åŠ è½½**ï¼šå¤§å‹ç»„ä»¶ä½¿ç”¨ `defineAsyncComponent`
- **è·¯ç”±æ‡’åŠ è½½**ï¼šæ‰€æœ‰è·¯ç”±ç»„ä»¶ä½¿ç”¨åŠ¨æ€å¯¼å…¥
- **åˆ—è¡¨ä¼˜åŒ–**ï¼šé•¿åˆ—è¡¨å¿…é¡»æ·»åŠ  `:key`ï¼Œè¶…è¿‡100é¡¹ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
- **æ–‡ä»¶å¤§å°æ§åˆ¶**ï¼šå•æ–‡ä»¶ä¸è¶…è¿‡200è¡Œï¼Œè¶…å‡ºéœ€æ‹†åˆ†

## ğŸ›¡ï¸ ç±»å‹å®‰å…¨
```typescript
// types/env.d.ts
interface ImportMetaEnv {
  readonly VITE_APP_ENV: 'development' | 'production'
  readonly VITE_API_BASE_URL: string
  readonly VITE_ALLOWED_ORIGINS: string
}

// types/api.d.ts
interface ApiResponse<T> {
  success: boolean
  data: T
  message?: string
}
```

## âœ… ä»£ç æ£€æŸ¥è¦ç‚¹
å¼€å‘æ—¶å¿…é¡»æ£€æŸ¥ï¼š
- [ ] æ˜¯å¦ä½¿ç”¨TypeScriptç±»å‹å£°æ˜
- [ ] ç»„ä»¶æ˜¯å¦è¶…è¿‡200è¡Œï¼ˆéœ€æ‹†åˆ†ï¼‰
- [ ] åˆ—è¡¨æ¸²æŸ“æ˜¯å¦æ·»åŠ key
- [ ] æ˜¯å¦å¤„ç†loadingå’ŒerrorçŠ¶æ€
- [ ] æ˜¯å¦ä½¿ç”¨ç¯å¢ƒæ„ŸçŸ¥é€»è¾‘
- [ ] æ ·å¼æ˜¯å¦è¶…è¿‡50è¡Œï¼ˆéœ€ç‹¬ç«‹æ–‡ä»¶ï¼‰
- [ ] æ˜¯å¦æ·»åŠ å¿…è¦çš„å‡½æ•°æ³¨é‡Š
- [ ] Propsæ˜¯å¦æ·»åŠ ç±»å‹éªŒè¯

## ğŸ“š è¯¦ç»†æ–‡æ¡£å¼•ç”¨
- ç¯å¢ƒé…ç½®è¯¦ç»†è¯´æ˜ï¼š`docs/vue/environment-advanced.md`
- ç»„ä»¶è®¾è®¡æ¨¡å¼ï¼š`docs/vue/component-patterns.md`
- æ€§èƒ½ä¼˜åŒ–æŒ‡å—ï¼š`docs/vue/performance-guide.md`
- æµ‹è¯•æœ€ä½³å®è·µï¼š`docs/vue/testing-guide.md`

